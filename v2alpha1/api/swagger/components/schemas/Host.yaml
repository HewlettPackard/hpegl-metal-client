allOf:
  - $ref: ./ResourceBase.yaml
  - type: object
    required:
      - description
      - networkIDs
      - networkForDefaultRoute
      - networkUntagged
    properties:
      description:
        type: string
        example: Description of Host
      serviceID:
        type: string
        format: uuid
        description: >-
          The image service identifier used to image the server. 'serviceID' is
          one of those listed by the Images array returned as part of the get
          /available-resources call.
      serviceFlavor:
        type: string
        example: ubuntu
        description: Overall flavor of server image used to image the server
      serviceVersion:
        type: string
        example: 18.04-20190807
        description: Version of the 'serviceFlavor' used to image the server
      locationID:
        type: string
        format: uuid
        description: >-
          The location of the machine assigned to the host.  'locationID' is one
          of those listed by the 'locationInfo' array returned as part of the get
          /available-resources call.
      instanceTypeName:
        type: string
        example: HPE Large
        description: >-
          Name of the instance type used to identify and select the machine
          assigned to the host.  Instance types are described by the 'instanceType'
          array returned by the get /available-resources call.
      instanceTypeID:
        type: string
        format: uuid
        description: >-
          UniqueID referring to the instance type used to identify and select the
          machine assigned to the host. Instance types are described by the
          'instanceType' array returned by the get /available-resources call.
      machineID:
        type: string
        format: uuid
        description: UniqueID referring to the machine on which this host is running.
      sshKeyIDs:
        type: array
        description: IDs of SSH Keys used when configuring the Host
        items:
          type: string
          format: uuid
      sshAuthorizedKeys:
        type: array
        description: Specific SSH keys that were when configuring the host.
        items:
          $ref: ./SSHKeyValue.yaml
      networkIDs:
        type: array
        description: >-
          The list of IDs corresponding to the networks that were provisioned to
          the host. These networks are among those listed in the 'networks' array
          returned by the get /available-resources call.
        items:
          type: string
          format: uuid
        example:
          - 046b6c7f-0b8a-43b9-b35d-6489e6daee91
          - 91eec8b5-6460-4532-aad1-47b983edb63c
      networkForDefaultRoute:
        type: string
        format: uuid
        description: >-
          The host's default network ID. This needs to be one of the values in the 
          'networkIDs' list.
        example: 046b6c7f-0b8a-43b9-b35d-6489e6daee91
      networkUntagged:
        type: string
        format: uuid
        description: >-
          ID of the network selected to be untagged. This needs to be one of the values in the 
          'networkIDs' list.
        example: 046b6c7f-0b8a-43b9-b35d-6489e6daee92
      preAllocatedIPs:
        type: array
        description: >-
          The list of pre-allocated IP addresses corresponding to the list of 'networkIDs'.
          Pre-allocated IP addresses are optional, but required when updating a host
          containing Pre-allocated IP addresses.
        items:
          type: string
      serviceNetsProviderMAC:
        type: object
        additionalProperties:
          type: string
        description: >-
          The map of Service Network (Provider) ID to Provider MAC address.  
          The Service Network must be a provider network provisioned to this host.
          Any Service Networks not included here will default to the physical MAC learned
          during machine discovery.
        example:
          046b6c7f-0b8a-43b9-b35d-6489e6daee91: a2:c8:93:15:2a:76
      userData:
        type: string
        description: >-
          User-provided data attached to the image configuration data when the
          host was provisioned
      nodeID:
        type: string
        example: Node21
        description: >-
          User-provided data to represent the identity of the host within an
          application environment. For example, this could be set to represent
          the Kubernetes node ID if the host is provisioned as a Kubernetes
          node.
      iscsiConfig:
        $ref: ./HostISCSIConfig.yaml
      connections:
        type: array
        description: Details describing host network connections
        items:
          $ref: ./HostConnection.yaml
      deleted:
        type: boolean
        description: True if the Host has been deleted.
      portalCommOkay:
        type: boolean
        description: Describes if the portal is in active communication to the device
      powerStatus:
        $ref: ./HostPowerState.yaml
      state:
        $ref: ./HostState.yaml
      substate:
        $ref: ./HostSubstate.yaml
      stateTime:
        type: string
        format: date-time
      substateTime:
        type: string
        format: date-time
      progress:
        type: integer
        format: int64
        minimum: 0
        maximum: 100
      alert:
        type: boolean
      alertInfo:
        type: array
        items:
          $ref: ./HostAlertInfo.yaml
      workflow:
        type: string
        description: The current workflow the host is in
      summaryStatus:
        $ref: ./HealthStatus.yaml
        description: Host health summary status
      labels:
        type: object
        additionalProperties:
          type: string
        description: The map of label name to label value for the host.
        example:
          serviceType: BMaaS
